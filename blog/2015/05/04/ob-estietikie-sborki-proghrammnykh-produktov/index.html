
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Об эстетике сборки программных продуктов  | Evil Blog</title>

	<meta name="author" content="Evil"> 
	
	<meta name="description" content="В последнее время стало модно писать любой код включая вспомогательные файлы для сборки и прочий шлак, упаковывать в
т.н. пакеты и публиковать куда- &hellip;"> <meta name="keywords" content="">

	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Evil Blog" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="/stylesheets/font-awesome.min.css" rel="stylesheet" type="text/css">
	
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	
</head>



<body>
	<header id="header" class="inner"><h1>Evil Blog</h1>
<nav id="main-nav"><ul>
	<li><a href="/">Blog</a></li>
	<li><a href="/archives">Archive</a></li>
	<li><a href="/contact">Contact</a></li>
</ul>
</nav>


</header>

	<div id="content" class="inner"><article class="post">
	<h2 class="title">Об эстетике сборки программных продуктов</h2>
	<div class="entry-content"><p>В последнее время стало модно писать любой код включая вспомогательные файлы для сборки и прочий шлак, упаковывать в
т.н. пакеты и публиковать куда-то. А далее пусть дорогие разработчики/пользователи это все качают и используют. Сегодня
я поговорю почему те, кто бездумно и не особо аккуратно использует эти вещи - мудаки.</p>

<!-- more -->


<p>Давайте посмотрим на ныне модный node.js и npm. Предположим мы наставили 100500 каких-то пакетов за 3 минуты, получили 20 мегабайт JavaScript, native библиотек и прочего говна и куда-то задеплоили. Проходит пол года или год. Продукт себе работал у заказчика и тут внезапно какой-то вирус поразил пакеты, да еще и баги развелись (предположим заказчик еще и на винде это все хостил). Заказчик находит себе свеженького фрилансера так как вы были заняты. И говорит: &ldquo;у меня проблема&rdquo;. Этот фрилансер пробует подтянуть зависимости и тот оказывается, что их версии не прописаны&hellip; Совместимость была убита и ничего не работает. Более того пакетов было такое множество, что на каждый все проблемы нужно разгребать руками. И это еще хорошо если пакеты вообще были прописаны&hellip; А если их просто модный кул девелопер ставил комманд лайном, потом это все счастье залил на сервер и радуется.</p>

<p>Теперь давайте же перейдем к java + maven:</p>

<ol>
<li>Мы не можем ставить зависимости в maven если они явно не прописаны в pom.xml (и это хорошо, уже обезопасили себя от одного эпик пиздеца)</li>
<li>Зависимости это в сущности jar - то есть собранные готовые к использованию библиотеки, а не помойка из пачки скриптов (даже с учетом того, что javascript скриптовый язык меня всегда поражала любовь говнодевов опубликовать все включая юнит тесты чтоб потом оно таскалось вместе с чужими приложениями и вся эта куча говна куда-то деплоилась).</li>
</ol>


<p>Почему это плохо? (спросите вы)</p>

<ol>
<li>Есть люди способные траблшутить, спустится на 1 уровень абстракции вниз и попробовать посмотреть контент этих файлов и разобраться чего у них не работает.</li>
<li>Есть ИДЕ, которые могут это все счастье индексировать чтоб как-то помочь разрабатывать. И ваши ЮНИТ-тесты и вспомогательный шлак для сборки никаким образом в этом не поможет, а только сделает хуже.</li>
</ol>


<p>Давайте посмотрим на мой &ldquo;любимый&rdquo; .net и NuGet:</p>

<p>Видимо заразившись от JS хипстеров Майкрософт сделал NuGet столь крутым, что его смогли приспособить даже для деплоя десктоп приложений. Меня как человека любящего ограничения это сразу толкнуло на недоверие. И так, что же не так с NuGet.
Видите ли тул, который способен автоматически менять код конфигов и просто код это всегда опасно. Более того это вдвойне опасно для новичков, которых на самом деле в software development не мало.
Например: NuGet пакет ставит файлы исходников и при апдейте их обновляет. Кто-то поправил эти исходники вручную, при следующем апдейте все пропало.
NuGet в одном проекте поставил в депенденси у депенденси сборку одной версии в другом другую. Я думаю не нужно объяснять чем это чревато.</p>

<p>Так о чем речь? Речь на самом деле не столько о пакетных менеджерах и их недостатках, а о том, что бездумно забивать в комманд лайн Install-Package очень плохо.</p>

<p>Нужно аккуратно управлять зависимостями, вести учет подключенных библиотек, не использовать все подряд только потому, что какой-то мудак на stackoverflow посоветовал. Я просто неоднократно видел как люди решают все проблемы установкой новой зависимости в свой продукт. Но чем больше у вас зависимостей тем меньше это ваш продукт. И тем больше у вас будет проблем в будущем. И не стоит мечтать о форках. Форки приведут к постоянным мерджам. И чем больше зависимостей тем все становится сложнее. Более того при потребности в 1% функционала пакета подумайте стоит ли его вообще ставить? Может лучше если он под MIT лицензией просто скопировать из гитхаба 1 класс если уж совсем лень?</p>

<p>И да, я знаю, что вы офигенные разработчики, а такая жесть бывает только в другой компании, городе, стране. Но почему же тогда shit happens?</p>
</div>


<div class="meta">
	<div class="date">








  



<time datetime="2015-05-04T09:36:03+03:00" pubdate data-updated="true">May 4th, 2015</time></div>
	

<div class="tags">

	<a class='category' href='/blog/categories/build/'>build</a>, <a class='category' href='/blog/categories/deployment/'>deployment</a>

</div>


</div>
</article>
</div>
	<footer id="footer" class="inner">Copyright &copy; 2015
 Evil 
<br>
Powered by Octopress.
</footer>
	

</body>
</html>
